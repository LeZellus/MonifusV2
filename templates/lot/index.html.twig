{% extends 'base.html.twig' %}

{% block title %}Mes Lots de Trading{% endblock %}

{% block navbar %}
    {% include 'components/navbar.html.twig' with {
        'title': 'Mes Lots de Trading',
        'back_url': path('app_trading_dashboard'),
        'back_label': '← Dashboard'
    } %}
{% endblock %}

{% block body %}
    <div class="wrapper-container">
        <!-- Sélecteur de personnage -->
        {% include 'components/character_selector.html.twig' %}

        {% if selectedCharacter %}
            <div class="flex justify-between items-center">
                <h2 class="text-white text-2xl font-bold">
                    Lots de {{ selectedCharacter.name }}
                </h2>
                <a href="{{ path('app_lot_new') }}" 
                   class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors">
                    + Nouveau lot
                </a>
            </div>

            {% include 'components/data_table.html.twig' with {
                headers: ['Item', 'Configuration', 'Prix Achat', 'Prix Vente', 'Profit', 'Statut', 'Actions'],
                rows: lots,
                row_template: 'lot/_table_row.html.twig',
                mobile_card_template: 'lot/_mobile_card.html.twig',
                empty_message: 'Aucun lot pour ' ~ selectedCharacter.name,
                empty_action: {
                    url: path('app_lot_new'),
                    text: 'Créer le premier lot'
                }
            } %}
        {% else %}
            <!-- Aucun personnage sélectionné -->
            <div class="text-center py-12">
                <p class="text-gray-400 text-lg mb-4">Sélectionnez un personnage pour voir ses lots</p>
            </div>
        {% endif %}
    </div>
{% endblock %}