{% extends 'base.html.twig' %}

{% block title %}Observation des Prix{% endblock %}

{% block navbar %}
    {% include 'components/navbar.html.twig' with {
        'title': 'Observation des Prix',
        'back_url': path('app_trading_dashboard'),
        'back_label': '← Dashboard'
    } %}
{% endblock %}

{% block body %}
    <div class="wrapper-container">
        <!-- Sélecteur de personnage -->
        {% include 'components/character_selector.html.twig' %}

        {% if selectedCharacter %}
            <div class="flex justify-between items-center">
                <h2 class="text-white text-2xl font-bold">
                    Items observés par {{ selectedCharacter.name }}
                </h2>
                <a href="{{ path('app_market_watch_new') }}" 
                   class="bg-orange-600 hover:bg-orange-700 text-white px-4 py-2 rounded-lg transition-colors">
                    + Nouvelle observation
                </a>
            </div>

            {% include 'components/data_table.html.twig' with {
                headers: ['Ressource', 'Moy. x1', 'Moy. x10', 'Moy. x100', 'Suivi', 'Actions'],
                rows: items_data,
                row_template: 'market_watch/_table_row.html.twig',
                mobile_card_template: 'market_watch/_mobile_card.html.twig',
                empty_message: 'Aucune observation pour ' ~ selectedCharacter.name,
                empty_action: {
                    url: path('app_market_watch_new'),
                    text: 'Créer la première observation'
                }
            } %}
        {% else %}
            <!-- Aucun personnage sélectionné -->
            <div class="text-center py-12">
                <p class="text-gray-400 text-lg mb-4">Sélectionnez un personnage pour voir ses observations</p>
            </div>
        {% endif %}
    </div>
{% endblock %}