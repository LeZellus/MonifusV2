{% extends 'base.html.twig' %}

{% block title %}Param√®tres du Compte{% endblock %}

{% block navbar %}
    {% include 'components/navbar.html.twig' with {
        'title': 'Param√®tres du Compte',
        'back_url': path('app_trading_dashboard'),
        'back_label': '‚Üê Dashboard'
    } %}
{% endblock %}

{% block body %}
    <div class="wrapper-container">
        <div class="max-w-2xl mx-auto grid gap-8">
            <!-- Informations g√©n√©rales -->
            <div class="wrapper-background">
                <h2 class="text-white text-xl font-semibold">üë§ Informations personnelles</h2>
                
                {{ form_start(form) }}
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        {{ form_label(form.email, null, {'label_attr': {'class': 'block text-white font-medium mb-2'}}) }}
                        {{ form_widget(form.email) }}
                        {{ form_errors(form.email) }}
                    </div>

                    <div>
                        {{ form_label(form.pseudonymeWebsite, null, {'label_attr': {'class': 'block text-white font-medium mb-2'}}) }}
                        {{ form_widget(form.pseudonymeWebsite) }}
                        {{ form_errors(form.pseudonymeWebsite) }}
                    </div>

                    <div>
                        {{ form_label(form.pseudonymeDofus, null, {'label_attr': {'class': 'block text-white font-medium mb-2'}}) }}
                        {{ form_widget(form.pseudonymeDofus) }}
                        {{ form_errors(form.pseudonymeDofus) }}
                    </div>

                    <div>
                        {{ form_label(form.discordId, null, {'label_attr': {'class': 'block text-white font-medium mb-2'}}) }}
                        {{ form_widget(form.discordId) }}
                        {{ form_errors(form.discordId) }}
                        <div class="form-help">Votre nom d'utilisateur Discord</div>
                    </div>
                </div>

                <div class="mt-6">
                    {{ form_label(form.description, null, {'label_attr': {'class': 'block text-white font-medium mb-2'}}) }}
                    {{ form_widget(form.description) }}
                    {{ form_errors(form.description) }}
                    <div class="form-help">Une courte description de votre profil</div>
                </div>
            </div>

            <!-- R√©seaux sociaux -->
            <div class="wrapper-background">
                <h2 class="text-white text-xl font-semibold">üåê R√©seaux sociaux</h2>
                
                <div class="space-y-4">
                    <div>
                        {{ form_label(form.youtubeUrl, null, {'label_attr': {'class': 'block text-white font-medium mb-2'}}) }}
                        {{ form_widget(form.youtubeUrl) }}
                        {{ form_errors(form.youtubeUrl) }}
                        <div class="form-help">https://youtube.com/@votre-chaine</div>
                    </div>

                    <div>
                        {{ form_label(form.twitchUrl, null, {'label_attr': {'class': 'block text-white font-medium mb-2'}}) }}
                        {{ form_widget(form.twitchUrl) }}
                        {{ form_errors(form.twitchUrl) }}
                        <div class="form-help">https://twitch.tv/votre-chaine</div>
                    </div>
                </div>
            </div>

            <!-- S√©curit√© -->
            <div class="wrapper-background">
                <h2 class="text-white text-xl font-semibold">üîí S√©curit√©</h2>
                
                <div>
                    {{ form_label(form.plainPassword, null, {'label_attr': {'class': 'block text-white font-medium mb-2'}}) }}
                    {{ form_widget(form.plainPassword) }}
                    {{ form_errors(form.plainPassword) }}
                    <div class="form-help">
                        Laissez vide si vous ne souhaitez pas changer votre mot de passe
                    </div>
                </div>
            </div>

            <!-- Actions -->
            <div class="action-group">
                <button type="submit" class="btn-full btn-primary btn-with-icon">
                    <span class="mr-2">üíæ</span>
                    Sauvegarder les modifications
                </button>
                <a href="{{ path('app_trading_dashboard') }}" class="btn-full btn-secondary btn-with-icon text-center">
                    <span class="mr-2">‚ùå</span>
                    Annuler
                </a>
            </div>

            {{ form_end(form) }}

            <!-- Informations du compte -->
            <div class="wrapper-background">
                <h3 class="text-white text-lg font-semibold mb-4">‚ÑπÔ∏è Informations du compte</h3>
                <div class="stats-grid-2 text-sm">
                    <div>
                        <span class="text-gray-400">Compte cr√©√© le :</span>
                        <span class="text-white">{{ app.user.createdAt|date('d/m/Y √† H:i') }}</span>
                    </div>
                    <div>
                        <span class="text-gray-400">Derni√®re modification :</span>
                        <span class="text-white">{{ app.user.updatedAt|date('d/m/Y √† H:i') }}</span>
                    </div>
                    <div>
                        <span class="text-gray-400">Statut :</span>
                        <span class="text-{{ app.user.isVerified ? 'green' : 'yellow' }}-400">
                            {{ app.user.isVerified ? '‚úÖ V√©rifi√©' : '‚è≥ En attente' }}
                        </span>
                    </div>
                    <div>
                        <span class="text-gray-400">Tutoriel :</span>
                        <span class="text-{{ app.user.isTutorial ? 'blue' : 'green' }}-400">
                            {{ app.user.isTutorial ? 'üìö √Ä faire' : '‚úÖ Termin√©' }}
                        </span>
                    </div>
                </div>
            </div>

            <!-- Actions avanc√©es -->
            <div class="stats-grid-2">
                <a href="{{ path('app_backup_index') }}" class="btn-primary p-4 rounded-lg text-center block">
                    <div class="text-lg mb-1">üíæ</div>
                    <div class="font-medium">Sauvegarder mes donn√©es</div>
                    <div class="text-blue-100 text-sm">Export complet JSON</div>
                </a>
                <a href="{{ path('app_profile_index') }}" class="btn-success p-4 rounded-lg text-center block">
                    <div class="text-lg mb-1">üë•</div>
                    <div class="font-medium">G√©rer mes profils</div>
                    <div class="text-green-100 text-sm">Profils et personnages</div>
                </a>
            </div>
        </div>
    </div>
{% endblock %}