{# templates/components/stats_card.html.twig #}
{#
Composant pour afficher des cartes de statistiques
Usage: {% include 'components/stats_card.html.twig' with {
    title: 'Titre',
    value: '42' ou 1500000,
    unit: 'K' ou 'kamas' ou null,
    subtitle: 'Description optionnelle',
    icon: 'ðŸ’°' (optionnel),
    color: 'blue' (optionnel: blue, green, orange, red, purple, yellow),
    size: 'normal' (optionnel: normal, large)
} %}
#}

{% set color_class = 'text-' ~ (color|default('blue')) ~ '-400' %}
{% set value_size = (size|default('normal')) == 'large' ? 'text-3xl' : 'text-2xl' %}

{# Formatage simple des valeurs #}
{% set formatted_value = value %}
{% set auto_unit = unit is defined ? unit : null %}

{# Auto-formatage seulement si la valeur est un entier >= 1000 #}
{% if value is not empty and value is not null %}
    {% if value is same as(value|round) and value >= 1000 %}
        {% set formatted_value = (value / 1000)|number_format(0, ',', ' ') %}
        {% set auto_unit = unit is defined ? unit : 'K' %}
    {% endif %}
{% endif %}

<div class="wrapper-background text-center">
    <h3 class="text-white text-lg font-semibold mb-2 flex items-center justify-center">
        {% if icon is defined %}
            <span class="mr-2">{{ icon }}</span>
        {% endif %}
        {{ title }}
    </h3>
    
    <p class="{{ color_class }} {{ value_size }} font-bold">
        {{ formatted_value }}{% if auto_unit %} {{ auto_unit }}{% endif %}
    </p>
    
    {% if subtitle is defined %}
        <p class="text-gray-400 text-sm">{{ subtitle }}</p>
    {% endif %}
</div>